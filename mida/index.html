<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>PyScript 画像サイズ変換</title>

    <!-- レスポンシブ動作対応 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- PyScript -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.4.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.4.1/core.js"></script>

</head>
<body>
    <h1>画像枠埋めツール</h1>

    <details>
        <summary>Release Notes : v.0.3</summary>
        <ul>
            <li>v.0.3 : 複数画像に対応</li>
            <li>v.0.2 : 変換後の画像のサイズを割合を選択できる</li>
            <li>v.0.1 : 変換後の画像の表示サイズを見やすくなり、ダウンロードボタンを追加</li>
            <li>v.0.0 : 画像枠埋めツールのリリース</li>
        </ul>
    </details><br><br>
  
    <input type="file" id="imageInput" accept="image/*" multiple>
    <br><br>

    <!-- <label for="widthInput">新しい幅:</label>
    <input type="number" id="widthInput" min="1" value="100">
    <br>

    <label for="heightInput">新しい高さ:</label>
    <input type="number" id="heightInput" min="1" value="100">
    <br><br> -->

    <select id="size_aspect" size="1">
        <option value='{"w":1,"h":1}'>インスタ(1:1)</option>
        <option value='{"w":16,"h":9}'>横長(9:16)</option>
        <option value='{"w":9,"h":16}'>縦長(16:9)</option>
        <option value='{"w":9,"h":16,"duble":"{"w":16h,"h":9}"}'>横長(9:16) -> 縦長(16:9)</option>
    </select>
    <br><br>

    <p>上 : 下</p>
    <input type="range" id="upperRate" name="rangeInput" min="1" max="9" step="1" onchange="updateTextInput(this.value);"><br>
    <input type="text" id="RateDisplay" value="">
    <br><br><br>

    <button py-click="run">サイズ変更</button>
    <br><br>

    <img id="outputImage" alt="変換後の画像" width="300"><br><br>

    <details>
        <summary>output images</summary>
        <div id="imageContainer"></div>

    </details><br><br>

    <script>
        document.getElementById('downloadButton').addEventListener('click', function() {
            const outputImage = document.getElementById('outputImage');
            const link = document.createElement('a');
            link.href = outputImage.src;
            link.download = 'resized_image.png';
            link.click();
        });

        function updateTextInput(val) {
            display_value = val + " : " + (10 - val);
            document.getElementById('RateDisplay').value=display_value; 
        };

    </script>
    <script type="py" src="./main.py" config="./pyscript.toml"></script>
</body>
</html>
