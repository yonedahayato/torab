<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
</head>
<body>
  <h1>Declare Thinking Beta</h1>

  <h2>Your Hand</h2>
  <div id="field">
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea0' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea1' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea2' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea3' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea4' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea5' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea6' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea7' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea8' width=9%>
    <img src="https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust1.png" id='imageArea9' width=9%>
  </div>
  <p>hand_id: </p><p id="hand_id_field"></p>

  <h2>Your Think</h2>
  <form action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfC0xE7a2kPEhSJLLuwl261P5l6kULKPzpeqdPcgZCPerV8IQ/formResponse" 
        method="POST"
        target="hidden_iframe"
        onsubmit="submitted=true;">

    <input type="hidden" name="entry.64674262" value="" id="hand_id_form">

    <input type="radio" name="entry.88364419" value="declare">Declare
    <input type="radio" name="entry.88364419" value="not declare">Not Declare<br>
    <br>
    <button type="submit">Submit</button>
    
  </form>
  <h2>Our Think</h2>
</body>

<script>
//　54 枚のカードを用意
const images = {};
for (let i = 1; i <= 54; i++){
  images[i] = "https://chicodeza.com/wordpress/wp-content/uploads/torannpu-illust" + i + ".png"
}

// カードをシャッフル
function arrayShuffle(array) {
  for(var i = (array.length - 1); 0 < i; i--){

    // 0〜(i+1)の範囲で値を取得
    var r = Math.floor(Math.random() * (i + 1));

    // 要素の並び替えを実行
    var tmp = array[i];
    array[i] = array[r];
    array[r] = tmp;
  }
  return array;
}

const shuffled = arrayShuffle(Object.keys(images));

const hand_num = 10;
const hands = shuffled.slice(0, hand_num).sort((a, b) => a - b);
var hand_id = "";

for (let i = 0; i < hand_num; i++) {
  const imageArea = document.getElementById('imageArea' + i);
  imageArea.src = images[hands[i]];
  hand_id += hands[i] + ",";
}

const handIdArea = document.getElementById('hand_id_field');
handIdArea.textContent = hand_id

const handIdFormArea = document.getElementById('hand_id_form');
handIdFormArea.value = hand_id

</script>

<iframe
    name="hidden_iframe"
    id="hidden_iframe"
    style="display: none"
    onload="if(submitted){location.reload()}"
>
</iframe>
</html>
